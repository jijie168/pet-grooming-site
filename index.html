<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Red Dolphin Pet Grooming</title>
  <meta name="description" content="Pet grooming services with booking, live chat, SMS and maps." />

  <style>
    :root{
      --bg:#0b1220;
      --card:#121a2b;
      --text:#e9eefc;
      --muted:#a8b3d6;
      --line:rgba(255,255,255,.12);
      --btn:#2b6cff;
      --btn2:#22c55e;
      --warn:#f59e0b;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 16px;
      --max: 1080px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:linear-gradient(180deg,#0b1220,#070b14);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,"Noto Sans",sans-serif}
    a{color:inherit}
    .wrap{max-width:var(--max);margin:0 auto;padding:24px}
    .nav{
      position:sticky;top:0;z-index:20;
      backdrop-filter: blur(10px);
      background:rgba(7,11,20,.6);
      border-bottom:1px solid var(--line);
    }
    .nav-inner{max-width:var(--max);margin:0 auto;padding:12px 24px;display:flex;gap:14px;align-items:center;justify-content:space-between}
    .brand{display:flex;gap:10px;align-items:center;font-weight:800;letter-spacing:.2px}
    .dot{width:10px;height:10px;border-radius:99px;background:var(--btn2);box-shadow:0 0 0 6px rgba(34,197,94,.12)}
    .menu{display:flex;gap:14px;flex-wrap:wrap;align-items:center}
    .menu a{padding:8px 10px;border-radius:10px;color:var(--muted);text-decoration:none;border:1px solid transparent}
    .menu a:hover{color:var(--text);border-color:var(--line);background:rgba(255,255,255,.04)}

    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:18px;
    }
    h1{margin:0 0 10px;font-size:34px;line-height:1.1}
    .sub{color:var(--muted);line-height:1.6}
    .pill{
      display:inline-flex;gap:8px;align-items:center;
      padding:8px 10px;border-radius:999px;background:rgba(43,108,255,.12);
      border:1px solid rgba(43,108,255,.25);color:#cfe0ff;font-size:13px
    }
    .row{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
    .btn{
      display:inline-flex;align-items:center;justify-content:center;gap:8px;
      padding:10px 12px;border-radius:12px;border:1px solid transparent;
      text-decoration:none;font-weight:700;cursor:pointer
    }
    .btn.primary{background:var(--btn);border-color:rgba(43,108,255,.5)}
    .btn.success{background:var(--btn2);border-color:rgba(34,197,94,.5);color:#05210f}
    .btn.ghost{background:rgba(255,255,255,.04);border-color:var(--line);color:var(--text)}
    .btn.warn{background:rgba(245,158,11,.16);border-color:rgba(245,158,11,.35)}
    .section{padding:14px 0}
    .section h2{margin:0 0 10px;font-size:24px}
    .muted{color:var(--muted)}
    .small{font-size:12px;color:var(--muted)}
    .hr{height:1px;background:var(--line);margin:14px 0}

    /* ‚úÖ ÊîæÂ§ß‰Ω†ÊåáÂÆöÁöÑÂÜÖÂÆπ */
    .service-title{font-size:30px;font-weight:900;margin:0 0 8px}
    .service-sub{font-size:18px;color:#dbe4ff;opacity:.95;margin:0 0 10px;line-height:1.5}
    .service-includes{font-size:18px;color:var(--text);opacity:.95;margin:0;line-height:1.6}
    .service-card{padding:22px}

    /* Booking form */
    label{display:block;font-size:14px;color:#dbe4ff;margin:10px 0 6px}
    .req{color:#ffb4b4;font-weight:800;margin-left:6px}
    input,select,textarea{
      width:100%;padding:12px 12px;border-radius:12px;
      border:1px solid var(--line);background:rgba(0,0,0,.25);color:var(--text)
    }
    textarea{min-height:92px;resize:vertical}
    .form-row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media (max-width:780px){.form-row{grid-template-columns:1fr}}
    .notice{
      padding:12px 14px;border-radius:12px;border:1px solid rgba(245,158,11,.35);
      background:rgba(245,158,11,.12);color:#ffe7b5;font-size:14px;line-height:1.5
    }
    .error{
      margin-top:10px;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid rgba(255,120,120,.35);
      background:rgba(255,120,120,.12);
      color:#ffd4d4;
      display:none;
      font-size:14px;
      line-height:1.5;
    }
    .ok{
      margin-top:10px;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid rgba(34,197,94,.35);
      background:rgba(34,197,94,.12);
      color:#d9ffe8;
      display:none;
      font-size:14px;
      line-height:1.5;
    }

    /* Map */
    .map-wrap{border-radius:16px;overflow:hidden;border:1px solid var(--line);box-shadow:var(--shadow)}
    iframe{display:block;width:100%;height:340px;border:0}

    /* Floating buttons */
    .fab{
      position:fixed;right:16px;bottom:18px;display:flex;flex-direction:column;gap:10px;z-index:50
    }
    .fab a{
      display:inline-flex;align-items:center;gap:10px;
      background:rgba(18,26,43,.92);border:1px solid var(--line);
      padding:10px 12px;border-radius:999px;text-decoration:none;color:var(--text);
      box-shadow:var(--shadow)
    }
    .fab .call{border-color:rgba(34,197,94,.35)}
    .fab .sms{border-color:rgba(43,108,255,.35)}
  </style>
</head>

<body>
  <div class="nav">
    <div class="nav-inner">
      <div class="brand">
        <span class="dot"></span>
        <span>Red Dolphin Pet Grooming</span>
      </div>
      <div class="menu">
        <a href="#services">Services</a>
        <a href="#book">Book Now</a>
        <a href="#location">Location</a>
        <a href="#contact">Contact</a>
      </div>
    </div>
  </div>

  <div class="wrap">
    <div class="section">
      <div class="card">
        <span class="pill">Live chat ‚Ä¢ SMS booking</span>
        <h1>Professional Pet Grooming Services</h1>
        <div class="sub">
          Address: <b>1680 E Broadway Suite E, Chula Vista, CA</b><br/>
          Phone: <b>(619) 754-0193</b>
        </div>
        <div class="row">
          <a class="btn success" href="tel:+16197540193">üìû Call</a>
          <a class="btn primary" href="sms:+16197540193?&body=Hi%20I%20would%20like%20to%20book%20pet%20grooming.">üí¨ SMS</a>
          <a class="btn ghost" href="#book">üìÖ Book Now</a>
        </div>
      </div>
    </div>

    <!-- ‚úÖ ÊîæÂ§ßÂêéÁöÑÊúçÂä°ËØ¥ÊòéÔºàÂéªÊéâ‰ª∑Ê†ºÂå∫Ôºâ -->
    <div class="section" id="services">
      <h2>Services</h2>
      <div class="muted">Dogs by weight and coat length ‚Ä¢ Cats available</div>

      <div class="card service-card" style="margin-top:12px">
        <div class="service-title">Bath & Brush</div>
        <div class="service-sub">Dogs by weight and coat length ‚Ä¢ Cats available</div>
        <div class="service-includes">
          Includes: nails, paw hair, conditioning, ears, and anal glands.
        </div>
      </div>

      <div class="card service-card" style="margin-top:14px">
        <div class="service-title">Full Grooming</div>
        <div class="service-sub">Dogs by weight and coat length ‚Ä¢ Cats available</div>
        <div class="service-includes">
          Includes: hair trimming, brushing, nail trimming, paw hair removal, conditioning, facial cleaning,
          ear cleaning, and anal gland cleaning.
        </div>
      </div>
    </div>

    <!-- ‚úÖ È¢ÑÁ∫¶Ë°®ÂçïÔºàÂøÖÂ°´È°π + Ââç‰∏ÄÂ§©Á°ÆËÆ§ÊèêÈÜíÔºâ -->
    <div class="section" id="book">
      <h2>Book Now</h2>
      <div class="notice">
        Required fields are marked with <b>*</b>. After submit: (1) SMS opens with booking details, (2) the same details will be sent to Tawk (if supported),
        and (3) a calendar file downloads ‚Äî your phone can remind you <b>1 day before</b> to confirm.
      </div>

      <div class="card" style="margin-top:12px">
        <div class="form-row">
          <div>
            <label>Owner Name <span class="req">*</span></label>
            <input id="ownerName" placeholder="Owner full name" />
          </div>
          <div>
            <label>Owner Phone <span class="req">*</span></label>
            <input id="ownerPhone" placeholder="(xxx) xxx-xxxx" />
          </div>
        </div>

        <div class="form-row">
          <div>
            <label>How many pets? <span class="req">*</span></label>
            <select id="petCount">
              <option value="">Select</option>
              <option value="1">1</option><option value="2">2</option><option value="3">3</option>
              <option value="4">4</option><option value="5+">5+</option>
            </select>
          </div>
          <div>
            <label>Pet Type <span class="req">*</span></label>
            <select id="petType">
              <option value="">Select</option>
              <option value="Dog">Dog</option>
              <option value="Cat">Cat</option>
              <option value="Mixed">Mixed (Dog & Cat)</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div>
            <label>Pet Name(s) <span class="req">*</span></label>
            <input id="petNames" placeholder="e.g., Coco / Lucky" />
          </div>
          <div>
            <label>Vaccinated? <span class="req">*</span></label>
            <select id="vaccinated">
              <option value="">Select</option>
              <option value="Yes">Yes</option>
              <option value="No">No</option>
              <option value="Not sure">Not sure</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div>
            <label>Pet Birthday (approx) <span class="req">*</span></label>
            <input id="petBirthday" type="date" />
          </div>
          <div>
            <label>Service <span class="req">*</span></label>
            <select id="service">
              <option value="">Select</option>
              <option value="Bath & Brush">Bath & Brush</option>
              <option value="Full Grooming">Full Grooming</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div>
            <label>Preferred Date <span class="req">*</span></label>
            <input id="date" type="date" />
          </div>
          <div>
            <label>Preferred Time <span class="req">*</span></label>
            <input id="time" type="time" />
          </div>
        </div>

        <div class="form-row">
          <div>
            <label>Notes (optional)</label>
            <textarea id="note" placeholder="Breed, temperament, special requests..."></textarea>
          </div>
          <div>
            <label>Confirmation Reminder</label>
            <div class="sub">
              We will create a calendar reminder <b>1 day before</b> your appointment.
              When the reminder pops up, open the calendar event and tap <b>Confirm</b> to send SMS.
            </div>
          </div>
        </div>

        <div class="row">
          <button class="btn primary" type="button" onclick="submitBooking()">Submit Booking</button>
          <button class="btn ghost" type="button" onclick="clearForm()">Clear</button>
          <a class="btn warn" href="sms:+16197540193">Send SMS Manually</a>
        </div>

        <div id="err" class="error"></div>
        <div id="ok" class="ok"></div>
      </div>
    </div>

    <div class="section" id="location">
      <h2>Location</h2>
      <div class="muted">Find us on Google Maps.</div>
      <div class="map-wrap" style="margin-top:12px">
        <iframe
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"
          src="https://www.google.com/maps?q=1680%20E%20Broadway%20Suite%20E,%20Chula%20Vista,%20CA&output=embed">
        </iframe>
      </div>
    </div>

    <div class="section" id="contact">
      <h2>Contact</h2>
      <div class="card">
        <div class="sub">
          Phone: <b>(619) 754-0193</b><br/>
          Address: <b>1680 E Broadway Suite E, Chula Vista, CA</b><br/>
          Live chat: bottom-right chat widget
        </div>
        <div class="row">
          <a class="btn success" href="tel:+16197540193">üìû Call</a>
          <a class="btn primary" href="sms:+16197540193">üí¨ SMS</a>
          <!-- ‚úÖ Open Site Â∑≤ÂéªÊéâ -->
        </div>
      </div>
      <div class="small" style="margin-top:10px;opacity:.8">¬© <span id="year"></span> Red Dolphin Pet Grooming</div>
    </div>
  </div>

  <div class="fab">
    <a class="call" href="tel:+16197540193">üìû Call</a>
    <a class="sms" href="sms:+16197540193?&body=Hi%20I%20would%20like%20to%20book%20pet%20grooming.">üí¨ SMS</a>
  </div>

  <script>
    const BUSINESS_PHONE = "+16197540193";

    function showError(msg){
      const el = document.getElementById("err");
      el.textContent = msg;
      el.style.display = "block";
      document.getElementById("ok").style.display = "none";
      scrollToId("book");
    }
    function showOk(msg){
      const el = document.getElementById("ok");
      el.textContent = msg;
      el.style.display = "block";
      document.getElementById("err").style.display = "none";
    }

    function scrollToId(id){
      document.getElementById(id).scrollIntoView({behavior:"smooth", block:"start"});
    }

    function clearForm(){
      ["ownerName","ownerPhone","petNames","petBirthday","date","time","note"].forEach(id=>document.getElementById(id).value="");
      document.getElementById("petCount").value="";
      document.getElementById("petType").value="";
      document.getElementById("vaccinated").value="";
      document.getElementById("service").value="";
      document.getElementById("err").style.display="none";
      document.getElementById("ok").style.display="none";
    }

    function buildBookingMessage(){
      const ownerName  = (document.getElementById("ownerName").value || "").trim();
      const ownerPhone = (document.getElementById("ownerPhone").value || "").trim();
      const petCount   = document.getElementById("petCount").value;
      const petType    = document.getElementById("petType").value;
      const petNames   = (document.getElementById("petNames").value || "").trim();
      const vaccinated = document.getElementById("vaccinated").value;
      const petBirthday= document.getElementById("petBirthday").value;
      const service    = document.getElementById("service").value;
      const date       = document.getElementById("date").value;
      const time       = document.getElementById("time").value;
      const note       = (document.getElementById("note").value || "").trim();

      return [
        "Pet Grooming Booking",
        `Owner: ${ownerName}`,
        `Owner Phone: ${ownerPhone}`,
        `Pets: ${petCount} (${petType})`,
        `Pet Name(s): ${petNames}`,
        `Vaccinated: ${vaccinated}`,
        `Pet Birthday (approx): ${petBirthday}`,
        `Service: ${service}`,
        `Appointment Date: ${date}`,
        `Appointment Time: ${time}`,
        `Notes: ${note || "N/A"}`
      ].join("\\n");
    }

    function makeConfirmSmsLink(ownerName, date, time, petNames){
      const body = encodeURIComponent(`CONFIRM - ${ownerName} - ${date} ${time} - ${petNames}`);
      return `sms:${BUSINESS_PHONE}?&body=${body}`;
    }

    // ‚úÖ ÁîüÊàê .icsÔºöÂåÖÂê´È¢ÑÁ∫¶Êó∂Èó¥ + Ââç‰∏ÄÂ§©ÊèêÈÜíÔºàVALARMÔºâ
    function downloadICS(ownerName, service, date, time, petNames){
      // date: YYYY-MM-DD, time: HH:MM
      const dtStart = new Date(`${date}T${time}:00`);
      if (isNaN(dtStart.getTime())) return;

      // ÈªòËÆ§Êó∂Èïø 1 Â∞èÊó∂
      const dtEnd = new Date(dtStart.getTime() + 60*60*1000);

      function pad(n){ return String(n).padStart(2,"0"); }
      function toICS(dt){
        // ‰ΩøÁî®Êú¨Âú∞Êó∂Èó¥Ôºà‰∏çÂä†ZÔºâÔºåiOS/Google CalendarÂèØËØÜÂà´
        return `${dt.getFullYear()}${pad(dt.getMonth()+1)}${pad(dt.getDate())}T${pad(dt.getHours())}${pad(dt.getMinutes())}00`;
      }

      const confirmLink = makeConfirmSmsLink(ownerName, date, time, petNames);
      const uid = `${Date.now()}-${Math.random().toString(16).slice(2)}@reddolphin`;

      const description =
        `Booking for: ${ownerName}\\n` +
        `Service: ${service}\\n` +
        `Pet(s): ${petNames}\\n\\n` +
        `CONFIRM (tap): ${confirmLink}\\n\\n` +
        `Reminder: Please confirm 1 day before.`;

      const ics =
`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Red Dolphin Pet Grooming//Booking//EN
CALSCALE:GREGORIAN
METHOD:PUBLISH
BEGIN:VEVENT
UID:${uid}
DTSTAMP:${toICS(new Date())}
DTSTART:${toICS(dtStart)}
DTEND:${toICS(dtEnd)}
SUMMARY:Pet Grooming - ${service}
DESCRIPTION:${description}
LOCATION:1680 E Broadway Suite E, Chula Vista, CA
BEGIN:VALARM
TRIGGER:-P1D
ACTION:DISPLAY
DESCRIPTION:Confirm tomorrow's appointment. Open event and tap CONFIRM.
END:VALARM
END:VEVENT
END:VCALENDAR`;

      const blob = new Blob([ics], {type: "text/calendar;charset=utf-8"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = `Booking-${date}-${ownerName.replace(/\\s+/g,"_")}.ics`;
      document.body.appendChild(a);
      a.click();
      a.remove();
      setTimeout(()=>URL.revokeObjectURL(url), 1500);
    }

    function sendToTawk(message){
      try{
        if (window.Tawk_API && typeof window.Tawk_API.sendMessage === "function") {
          window.Tawk_API.sendMessage(message);
          return true;
        }
      }catch(e){}
      return false;
    }

    function submitBooking(){
      const ownerName  = (document.getElementById("ownerName").value || "").trim();
      const ownerPhone = (document.getElementById("ownerPhone").value || "").trim();
      const petCount   = document.getElementById("petCount").value;
      const petType    = document.getElementById("petType").value;
      const petNames   = (document.getElementById("petNames").value || "").trim();
      const vaccinated = document.getElementById("vaccinated").value;
      const petBirthday= document.getElementById("petBirthday").value;
      const service    = document.getElementById("service").value;
      const date       = document.getElementById("date").value;
      const time       = document.getElementById("time").value;

      // ‚úÖ ÂøÖÂ°´Ê†°È™å
      if(!ownerName) return showError("Owner Name is required.");
      if(!ownerPhone) return showError("Owner Phone is required.");
      if(!petCount) return showError("Please select how many pets.");
      if(!petType) return showError("Please select pet type.");
      if(!petNames) return showError("Pet Name(s) is required.");
      if(!vaccinated) return showError("Please select vaccination status.");
      if(!petBirthday) return showError("Pet Birthday (approx) is required.");
      if(!service) return showError("Please select a service.");
      if(!date) return showError("Preferred Date is required.");
      if(!time) return showError("Preferred Time is required.");

      const msg = buildBookingMessage();

      // 1) Â∞ùËØïÂèëÂà∞ TawkÔºàËÉΩÂèëÂ∞±ÂèëÔºâ
      let sent = sendToTawk(msg);
      if(!sent){
        let tries = 0;
        const timer = setInterval(()=>{
          tries++;
          if(sendToTawk(msg) || tries>=8) clearInterval(timer);
        }, 700);
      }

      // 2) ‰∏ãËΩΩÊó•ÂéÜÊñá‰ª∂ÔºåÂâç‰∏ÄÂ§©ÊèêÈÜí + ‰∫ã‰ª∂ÂÜÖ‚ÄúÁÇπÂáªÁ°ÆËÆ§‚ÄùÁü≠‰ø°ÈìæÊé•
      downloadICS(ownerName, service, date, time, petNames);

      // 3) ÊâìÂºÄÁü≠‰ø°ÔºàÂèëÁªôÂ∫óÈáå 619Ôºâ
      const smsBody = encodeURIComponent(msg);
      window.location.href = `sms:${BUSINESS_PHONE}?&body=${smsBody}`;

      showOk("Submitted! Please send the SMS to confirm booking. A calendar reminder was downloaded (1 day before).");
    }

    // Init
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>

  <!-- Tawk.to -->
  <script type="text/javascript">
    var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
    (function(){
      var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
      s1.async=true;
      s1.src='https://embed.tawk.to/698917279842801c33e38579/1jgvo4shb';
      s1.charset='UTF-8';
      s1.setAttribute('crossorigin','*');
      s0.parentNode.insertBefore(s1,s0);
    })();
  </script>
</body>
</html>
